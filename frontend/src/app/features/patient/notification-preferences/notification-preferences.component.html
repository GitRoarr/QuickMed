<div class="preferences-container">
  <aside class="sidebar" [class.collapsed]="sidebarCollapsed()">
    <div class="sidebar-header">
      <div class="logo" *ngIf="!sidebarCollapsed()" (click)="goHome()" style="cursor:pointer">
        <div class="logo-icon">
          <img src="assets/images/QuickMed-Logo.png" alt="QuickMed Logo" class="h-8 mb-2" />
        </div>
        <div class="logo-text">
          <h3>QuickMed</h3>
          <p>Patient Portal</p>
        </div>
      </div>
      <button class="toggle-btn" (click)="toggleSidebar()">
        <i class="bi" [class.bi-chevron-right]="sidebarCollapsed()" [class.bi-chevron-left]="!sidebarCollapsed()"></i>
      </button>
    </div>
    <nav class="sidebar-nav">
      <a *ngFor="let item of menuItems" [routerLink]="item.route" class="nav-item" [class.active]="item.active">
        <i class="bi" [class]="'bi ' + item.icon"></i>
        <span *ngIf="!sidebarCollapsed()">{{ item.label }}</span>
      </a>
    </nav>
  </aside>

  <main class="main-content">
    <div class="success-message" *ngIf="showSuccessMessage()">
      <i class="bi bi-check-circle"></i>
      <span>Preferences saved successfully!</span>
    </div>

    <div class="page-header">
      <h1>Notification Preferences</h1>
      <p>Manage how you receive notifications</p>
    </div>

    <div class="preferences-section">
      <h2>Notification Types</h2>
      <div class="preference-item">
        <div class="preference-info">
          <h3>Email Notifications</h3>
          <p>Receive notifications via email</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" [checked]="preferences().emailNotifications" 
                 (change)="updatePreference('emailNotifications', $event.target.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="preference-item">
        <div class="preference-info">
          <h3>Push Notifications</h3>
          <p>Receive push notifications</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" [checked]="preferences().pushNotifications" 
                 (change)="updatePreference('pushNotifications', $event.target.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="preference-item">
        <div class="preference-info">
          <h3>SMS Notifications</h3>
          <p>Receive notifications via SMS</p>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" [checked]="preferences().smsNotifications" 
                 (change)="updatePreference('smsNotifications', $event.target.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="actions">
      <button class="btn-outline" (click)="resetToDefaults()">Reset to Defaults</button>
      <button class="btn-primary" (click)="savePreferences()" [disabled]="isSaving()">
        <i class="bi bi-check-circle"></i>
        {{ isSaving() ? 'Saving...' : 'Save Preferences' }}
      </button>
    </div>
  </main>
</div>
