<nav class="navbar navbar-expand-lg fixed-top" 
    [ngClass]="{
  'bg-light navbar-light': !isDarkMode(),
  'bg-dark navbar-dark': isDarkMode()
}">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" routerLink="/">
      <img src="assets/images/QuickMed-Logo.png" alt="QuickMed" width="60" height="60" class="rounded-3 me-2" />
      <span class="fw-bold fs-5">QuickMed</span>
    </a>

    

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item"><a class="nav-link fw-medium" routerLink="/">Features</a></li>
        <li class="nav-item"><a class="nav-link fw-medium" href="#how-it-works">How It Works</a></li>
        <li class="nav-item"><a class="nav-link fw-medium" href="#testimonials">Testimonials</a></li>
      </ul>

      <div class="d-flex align-items-center gap-3">
        <button 
          class="theme-toggle" 
          (click)="toggleTheme()"
          [attr.aria-label]="isDarkMode() ? 'Switch to Light Mode' : 'Switch to Dark Mode'"
          [ngClass]="{ 'dark': isDarkMode() }">
          <div class="icon-wrapper sun-wrapper" *ngIf="!isDarkMode()">
            <img src="https://img.icons8.com/?size=100&id=6Z2mGj6qDVv4&format=png&color=000000" alt="Sun" />
          </div>
          <div class="icon-wrapper moon-wrapper" *ngIf="isDarkMode()">
            <img src="https://img.icons8.com/?size=100&id=6DXM8bs2tFSU&format=png&color=ffffff" alt="Moon" />
          </div>
        </button>

        <ng-container *ngIf="!currentUser(); else loggedIn">
          <a routerLink="/login" class="btn px-4 btn-outline-primary">Log In</a>
          <a routerLink="/register" class="btn btn-success px-4">Get Started</a>
        </ng-container>

                <ng-template #loggedIn>
                    <div class="d-flex align-items-center gap-3">
                        <div class="user-avatar-wrapper d-flex align-items-center gap-2" style="cursor: pointer;" (click)="navigateToDashboard()">
              <img 
                *ngIf="currentUser()?.avatar; else initialsAvatar"
                [src]="currentUser()?.avatar!" 
                alt="Avatar" 
                class="rounded-circle" 
                width="40" height="40" />
              <ng-template #initialsAvatar>
                 <div class="placeholder-avatar rounded-circle text-white fw-bold d-flex align-items-center justify-content-center"
                     style="width: 40px; height: 40px; background-color: var(--primary-color); font-size: 16px;">
                  {{ getInitials(currentUser()?.firstName, currentUser()?.lastName) }}
                </div>
              </ng-template>
              <span class="fw-medium">{{ currentUser()?.firstName }}</span>

                            <!-- Hover dropdown -->
                            <div class="profile-menu" (click)="$event.stopPropagation()">
                                <button type="button" class="dropdown-item" (click)="$event.stopPropagation(); openEditProfile()">Edit Profile</button>
                                <button type="button" class="dropdown-item text-danger" (click)="$event.stopPropagation(); logout()">Logout</button>
                            </div>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</nav>





<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 class="hero-title">
                        Your Health,<br>
                        <span class="text-primary">Your Priority</span>
                    </h1>
                    <p class="hero-description">
                        Book appointments in seconds, connect with top doctors instantly, and manage your health journey with a smile. Because healthcare should feel good.
                    </p>
                    <div class="hero-actions">
                                                <button class="btn btn-primary btn-lg px-5" (click)="navigateToDashboard()">
                            Book Your First Appointment
                            <img class="inline-icon ms-2" src="https://img.icons8.com/?size=100&id=26138&format=png&color=ffffff" alt="Next" />
                        </button>
                                                <a href="#how-it-works" class="btn btn-link text-light" *ngIf="!isDarkMode()">
              Watch Demo
              <i class="bi bi-play-circle ms-2"></i>
            </a>
                    </div>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="bi bi-people-fill"></i>
                            </div>
                            <div>
                                <div class="stat-number">
                                  {{
                                    happyPatients() !== null
                                      ? (happyPatients()! | number:'1.0-0') + '+'
                                      : '—'
                                  }}
                                </div>
                                <div class="stat-label">Happy Patients</div>
                            </div>
                        </div>
                        <div class="stat-divider"></div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                                                <img src="https://img.icons8.com/?size=100&id=8ggStxqyboK5&format=png&color=0FA958" alt="Rating icon" />
                            </div>
                            <div>
                                <div class="stat-number">
                                  {{
                                    platformRating() !== null
                                      ? (platformRating()! | number:'1.1-1') + '/5'
                                      : '—'
                                  }}
                                </div>
                                <div class="stat-label">Rating</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image">
                    <div class="image-card">
                        <img src="assets/images/QuickMed-Logo.png" alt="Healthcare professionals" class="img-fluid">
                        <div class="floating-badge badge-1">
                            <i class="bi bi-heart-pulse-fill"></i>
                            <span>Health Tracking</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hero-decoration"></div>
</section>

<section class="benefits-section">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">Everything you need, nothing you don't</h2>
            <p class="section-subtitle">Powerful, reliable, fast. Make healthcare management feel like a breeze.</p>
        </div>
        <div class="row g-4">
            <div class="col-md-6 col-lg-3">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="bi bi-clock-history"></i>
                    </div>
                    <h4>Smart Scheduling</h4>
                    <p>Easy one-click tool and ultra-sleek UI for instant appointment booking.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <img src="https://img.icons8.com/?size=100&id=63256&format=png&color=0FA958" alt="Zero Wait icon" />
                    </div>
                    <h4>Zero Wait Times</h4>
                    <p>Get matched with a doctor in your city. No more waiting in queues.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <img src="https://img.icons8.com/?size=100&id=13068&format=png&color=0FA958" alt="Telemedicine icon" />
                    </div>
                    <h4>Telemedicine Ready</h4>
                    <p>Video calls with doctors, secure screen sharing, and digital prescriptions.</p>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <img src="https://img.icons8.com/?size=100&id=59778&format=png&color=0FA958" alt="Health records icon" />
                    </div>
                    <h4>Health Records</h4>
                    <p>All your medical history in one secure and accessible place.</p>
                </div>
            </div>
        
           
        </div>
    </div>
</section>

<section class="how-it-works-section" id="how-it-works">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">Get started in 3 simple steps</h2>
            <p class="section-subtitle">It's so easy you'll wonder why healthcare wasn't always like this</p>
        </div>
        <div class="row g-5">
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h3>Create Your Profile</h3>
                    <p>Sign up in seconds. Add your health info, insurance, and preferences.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h3>Find Your Doctor</h3>
                    <p>Browse specialists, read reviews, and pick the perfect match for you.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h3>Book & Meet</h3>
                    <p>Choose a time slot, confirm instantly, and meet your doctor online or in-person.</p>
                </div>
            </div>
        </div>
        <div class="text-center mt-5">
                        <button class="btn btn-primary btn-lg px-5" (click)="navigateToDashboard()">
                Start Your Journey
                <img class="inline-icon ms-2" src="https://img.icons8.com/?size=100&id=26138&format=png&color=ffffff" alt="Next" />
            </button>
        </div>
    </div>
</section>

<!-- Testimonials Section -->
<section class="testimonials-section" id="testimonials">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">Loved by patients and doctors</h2>
            <p class="section-subtitle">Don't just take our word for it</p>
        </div>
        <div class="row g-4" *ngIf="testimonials().length; else testimonialsFallback">
            <div class="col-md-4" *ngFor="let testimonial of testimonials(); trackBy: trackTestimonial">
                <div class="testimonial-card">
                    <div class="stars">
                        <i
                          class="bi"
                          *ngFor="let star of getStarArray(testimonial.rating); let i = index"
                          [ngClass]="star ? 'bi-star-fill text-warning' : 'bi-star'"
                          aria-hidden="true"
                        ></i>
                    </div>
                    <p class="testimonial-text">"{{ testimonial.comment }}"</p>
                    <div class="testimonial-author">
                        <div class="author-avatar" *ngIf="testimonial.patientAvatar">
                            <img [src]="testimonial.patientAvatar" alt="{{ testimonial.patientName }} avatar" />
                        </div>
                        <div>
                            <div class="author-name">{{ testimonial.patientName || 'Patient' }}</div>
                            <div class="author-role">{{ testimonial.patientRole || 'Patient' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-template #testimonialsFallback>
          <div class="text-center text-muted">Testimonials are loading. Check back shortly.</div>
        </ng-template>

                <div class="text-center mt-4" *ngIf="!reviewSubmitted()">
                    <button class="btn btn-primary btn-lg review-cta" type="button" (click)="openReviewModal()">
                        <i class="bi bi-pen me-2"></i>
                        Write a Review
                    </button>
                </div>
    </div>

        <div class="review-overlay" *ngIf="reviewModalOpen()">
            <div class="review-modal">
                <button class="btn-close" aria-label="Close" (click)="closeReviewModal()"></button>
                <h3 class="review-title">Share Your Experience</h3>
                <p class="review-subtitle">Help others by sharing your feedback about QuickMed</p>

                <div class="review-group">
                    <label class="review-label">Your Rating</label>
                    <div class="rating-stars"
                             (mouseleave)="setReviewHover(reviewRating())">
                            <button type="button"
                                        class="star-button"
                                        *ngFor="let star of [1,2,3,4,5]"
                                        (mouseenter)="setReviewHover(star)"
                                        (click)="setReviewRating(star)"
                                        [ngClass]="{ filled: reviewHover() >= star || reviewRating() >= star }"
                                [attr.aria-label]="'Rate ' + star + ' star'">
                            <i class="bi" [ngClass]="(reviewHover() >= star || reviewRating() >= star) ? 'bi-star-fill' : 'bi-star'"></i>
                        </button>
                    </div>
                </div>

                <div class="review-group">
                    <label class="review-label">Your Review</label>
                    <textarea
                        class="form-control review-textarea"
                        rows="5"
                        placeholder="Tell us about your experience with QuickMed..."
                        [ngModel]="reviewText()"
                        (ngModelChange)="reviewText.set($event)"
                        [maxLength]="reviewCharLimit"
                    ></textarea>
                    <div class="review-meta">
                        <small>Minimum 10 characters</small>
                        <small>{{ reviewCharCount }}/{{ reviewCharLimit }}</small>
                    </div>
                </div>

                <div class="review-error" *ngIf="reviewError()">
                    {{ reviewError() }}
                </div>

                <div class="d-grid">
                    <button class="btn btn-success btn-lg" type="button" [disabled]="!canSubmitReview()" (click)="submitReview()">
                        {{ reviewSubmitting() ? 'Submitting...' : 'Submit Review' }}
                    </button>
                </div>
            </div>
        </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-content text-center">
            <h2 class="cta-title">Ready to feel better?</h2>
            <p class="cta-subtitle">Join thousands of happy patients who've discovered a better way to manage their health</p>
                        <button class="btn btn-primary btn-lg px-5" (click)="navigateToDashboard()">
                Get Started for Free
                <img class="inline-icon ms-2" src="https://img.icons8.com/?size=100&id=26138&format=png&color=ffffff" alt="Next" />
            </button>
            <p class="cta-note">No credit card required. Free forever.</p>
        </div>
    </div>
</section>

<!-- Edit Profile Modal -->
<section>
    <div class="review-overlay" *ngIf="editProfileOpen()">
        <div class="review-modal profile-modal">
            <button class="btn-close" aria-label="Close" (click)="closeEditProfile()"></button>
            <h3 class="review-title">Edit Profile</h3>
            <p class="review-subtitle">Update your information and profile picture</p>

            <div class="review-group">
                <label class="review-label">Profile Picture</label>
                <div class="profile-avatar-row">
                    <div class="profile-avatar-preview rounded-circle" role="button" aria-label="Upload profile picture" (click)="avatarInput.click()">
                        <img *ngIf="avatarPreview(); else avatarInitials" [src]="avatarPreview()!" alt="Avatar preview" />
                        <ng-template #avatarInitials>
                            <div class="initials">{{ getInitials(profileFirstName(), profileLastName()) }}</div>
                        </ng-template>
                        <span class="avatar-add-badge" aria-hidden="true"><i class="bi bi-plus-lg"></i></span>
                    </div>
                    <div>
                        <input #avatarInput class="visually-hidden" type="file" accept="image/*" (change)="onAvatarSelected($event)" />
                    </div>
                </div>
            </div>

            <div class="review-group">
                <label class="review-label">First Name</label>
                <input class="form-control" type="text" [ngModel]="profileFirstName()" (ngModelChange)="profileFirstName.set($event)" />
            </div>

            <div class="review-group">
                <label class="review-label">Last Name</label>
                <input class="form-control" type="text" [ngModel]="profileLastName()" (ngModelChange)="profileLastName.set($event)" />
            </div>

            <div class="review-group">
                <label class="review-label">Email</label>
                <input class="form-control" type="email" [ngModel]="profileEmail()" (ngModelChange)="profileEmail.set($event)" />
            </div>

            <div class="review-group">
                <label class="review-label">Phone</label>
                <input class="form-control" type="tel" [ngModel]="profilePhone()" (ngModelChange)="profilePhone.set($event)" />
            </div>

            <!-- Doctor-only fields -->
            <div class="review-group" *ngIf="currentUser()?.role === 'doctor'">
                <label class="review-label">Specialty</label>
                <input class="form-control" type="text" [ngModel]="profileSpecialty()" (ngModelChange)="profileSpecialty.set($event)" />
            </div>
            <div class="review-group" *ngIf="currentUser()?.role === 'doctor'">
                <label class="review-label">Bio</label>
                <textarea class="form-control" rows="4" [ngModel]="profileBio()" (ngModelChange)="profileBio.set($event)"></textarea>
            </div>

            <div class="review-error" *ngIf="profileError()">{{ profileError() }}</div>

            <div class="d-grid">
                <button class="btn btn-primary btn-lg" type="button" [disabled]="!canSubmitProfile()" (click)="submitProfile()">
                    {{ profileSubmitting() ? 'Saving...' : 'Save Changes' }}
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="footer-brand">
                    <div class="d-flex align-items-center mb-3">
                        <div class="logo-icon me-2">
                            <img src="assets/images/QuickMed-Logo.png" alt="QuickMed logo" />
                        </div>
                        <span class="brand-name">QuickMed</span>
                    </div>
                    <p class="footer-description">Your trusted healthcare booking platform. Making healthcare accessible, one appointment at a time.</p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="bi bi-twitter"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="bi bi-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="bi bi-linkedin"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4">
                <h5 class="footer-title">Product</h5>
                <ul class="footer-links">
                    <li><a href="#">Features</a></li>
                    <li><a href="#">Pricing</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">Roadmap</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-4">
                <h5 class="footer-title">Company</h5>
                <ul class="footer-links">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Press</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-4">
                <h5 class="footer-title">Resources</h5>
                <ul class="footer-links">
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy</a></li>
                    <li><a href="#">Terms</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-12">
                <h5 class="footer-title">Contact</h5>
                <ul class="footer-contact">
                    <li>
                        <i class="bi bi-envelope me-2"></i>
                        <a href="mailto:girmaenkuchille@example.com">girmaenkuchille@gmail.com</a>
                    </li>
                    <li>
                        <i class="bi bi-telephone me-2"></i>
                        <span>+251920189715</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 QuickMed. All rights reserved. Built with <i class="bi bi-heart-fill text-primary"></i></p>
        </div>
    </div>
</footer>