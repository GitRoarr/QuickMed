<div class="dashboard-container">
  <!-- Header Section -->
  <header class="dashboard-header">
    <div class="header-left">
      <div class="logo-section">
        <div class="logo-icon">
          <svg width="32" height="32" viewBox="0 0 40 40" fill="none">
            <rect width="40" height="40" rx="8" fill="url(#doctorGradient)"/>
            <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white"/>
            <defs>
              <linearGradient id="doctorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="brand-info">
          <h3 class="brand-name">QuickMed</h3>
          <p class="brand-subtitle">Doctor Portal</p>
        </div>
      </div>
    </div>

    <div class="header-right">
      <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text" placeholder="Search patients...">
      </div>
      <button class="icon-btn" (click)="toggleTheme()">
        <i class="bi" [class.bi-sun]="!isDarkMode" [class.bi-moon]="isDarkMode"></i>
      </button>
      <button class="emergency-btn">
        <i class="bi bi-telephone"></i>
        Emergency
      </button>
      <div class="profile-avatar">
        <i class="bi bi-person-circle"></i>
      </div>
    </div>
  </header>

  <div class="dashboard-content">
    <!-- Added welcome greeting section -->
    <div class="welcome-section">
      <h2 class="welcome-title">Good morning, Dr. {{ doctorName }}</h2>
      <p class="welcome-subtitle">{{ doctorSpecialty }} • {{ doctorDepartment }} Department</p>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon green-bg">
          <i class="bi bi-calendar-check"></i>
        </div>
        <div class="stat-info">
          <p class="stat-label">Total Today</p>
          <h2 class="stat-value">{{ getTodayTotal() }}</h2>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon green-bg">
          <i class="bi bi-check-circle"></i>
        </div>
        <div class="stat-info">
          <p class="stat-label">Completed</p>
          <h2 class="stat-value">{{ getCompletedCount() }}</h2>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon orange-bg">
          <i class="bi bi-clock"></i>
        </div>
        <div class="stat-info">
          <p class="stat-label">Pending</p>
          <h2 class="stat-value">{{ getPendingCount() }}</h2>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon green-bg">
          <i class="bi bi-people"></i>
        </div>
        <div class="stat-info">
          <p class="stat-label">Patients</p>
          <h2 class="stat-value">{{ getPatientCount() }}</h2>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon red-bg">
          <i class="bi bi-x-circle"></i>
        </div>
        <div class="stat-info">
          <p class="stat-label">Cancelled</p>
          <h2 class="stat-value">{{ getCancelledCount() }}</h2>
        </div>
      </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Appointments Section -->
      <div class="appointments-section">
        <!-- Tabs -->
        <div class="tabs">
          <button 
            class="tab" 
            [class.active]="activeTab === 'schedule'"
            (click)="activeTab = 'schedule'">
            Today's Schedule
          </button>
          <button 
            class="tab" 
            [class.active]="activeTab === 'recent'"
            (click)="activeTab = 'recent'">
            Recent Patients
          </button>
          <button 
            class="tab" 
            [class.active]="activeTab === 'pending'"
            (click)="activeTab = 'pending'">
            Pending Tasks
          </button>
        </div>

        <!-- Appointments Header -->
        <div class="appointments-header">
          <h2 class="appointments-title">Appointments - {{ currentDate | date: 'MMMM d, yyyy' }}</h2>
          <button class="view-calendar-btn">
            <i class="bi bi-calendar"></i>
            View Calendar
          </button>
        </div>

        <!-- Appointments List -->
        <div class="appointments-list">
          <div *ngFor="let appointment of todayAppointments" class="appointment-card">
            <div class="appointment-main">
              <div class="patient-avatar">
                {{ getInitials(appointment.patient) }}
              </div>
              <div class="appointment-details">
                <div class="patient-header">
                  <h3 class="patient-name">{{ appointment.patient }}</h3>
                  <span class="status-badge" [class]="getStatusClass(appointment.status)">
                    <i [class]="getStatusIcon(appointment.status)"></i>
                    {{ appointment.status }}
                  </span>
                </div>
                <p class="patient-meta">{{ appointment.age }} years • {{ appointment.type }}</p>
                
                <div class="appointment-info">
                  <div class="info-item">
                    <i class="bi bi-clock"></i>
                    <span>{{ appointment.time }} • {{ appointment.duration }}</span>
                  </div>
                  <div class="info-item">
                    <i class="bi bi-file-text"></i>
                    <span>{{ appointment.reason }}</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="appointment-actions">
              <button 
                *ngIf="appointment.status === 'pending'" 
                class="btn-primary">
                Start Consultation
              </button>
              <button class="btn-secondary">
                View Records
              </button>
              <button 
                *ngIf="appointment.status === 'completed'" 
                class="btn-secondary">
                Add Notes
              </button>
            </div>
          </div>

          <div *ngIf="todayAppointments.length === 0" class="empty-state">
            <i class="bi bi-calendar-x"></i>
            <p>No appointments scheduled for today</p>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <aside class="sidebar">
        <!-- Doctor Profile -->
        <div class="profile-card">
          <h3 class="card-title">Doctor Profile</h3>
          <div class="profile-content">
            <div class="profile-avatar-large">
              <i class="bi bi-person-circle"></i>
            </div>
            <h4 class="profile-name">Dr. {{ doctorName }}</h4>
            <p class="profile-specialty">{{ doctorSpecialty }}</p>
            
            <div class="profile-details">
              <div class="detail-row">
                <span class="detail-label">Department:</span>
                <span class="detail-value">{{ doctorDepartment }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">License:</span>
                <span class="detail-value">{{ doctorLicense }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Status:</span>
                <span class="status-badge on-duty">On Duty</span>
              </div>
            </div>

            <button class="btn-outline">View Full Profile</button>
          </div>
        </div>

        <!-- This Week Stats -->
        <div class="week-stats-card">
          <h3 class="card-title">This Week</h3>
          <div class="week-stats">
            <div class="week-stat">
              <i class="bi bi-people"></i>
              <div>
                <p class="week-stat-label">Total Patients</p>
                <p class="week-stat-value">{{ weekStats.totalPatients }}</p>
              </div>
            </div>
            <div class="week-stat">
              <i class="bi bi-chat-dots"></i>
              <div>
                <p class="week-stat-label">Consultations</p>
                <p class="week-stat-value">{{ weekStats.consultations }}</p>
              </div>
            </div>
            <div class="week-stat">
              <i class="bi bi-file-earmark-text"></i>
              <div>
                <p class="week-stat-label">Reports Pending</p>
                <p class="week-stat-value">{{ weekStats.reportsPending }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions-card">
          <h3 class="card-title">Quick Actions</h3>
          <div class="quick-actions">
            <button class="quick-action-btn">
              <i class="bi bi-people"></i>
              <span>View All Patients</span>
            </button>
            <button class="quick-action-btn">
              <i class="bi bi-prescription2"></i>
              <span>Write Prescription</span>
            </button>
            <button class="quick-action-btn">
              <i class="bi bi-activity"></i>
              <span>Order Lab Tests</span>
            </button>
            <button class="quick-action-btn">
              <i class="bi bi-calendar-check"></i>
              <span>Manage Schedule</span>
            </button>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>
