<aside
  class="receptionist-sidebar"
  [class.dark]="darkTheme"
  [class.collapsed]="collapsed"
>
  <div class="sidebar-header">
    <button
      class="collapse-toggle"
      type="button"
      (click)="toggleCollapse()"
      [attr.aria-pressed]="collapsed"
      [attr.title]="collapsed ? 'Expand sidebar' : 'Collapse sidebar'"
    >
      <i class="bi" [ngClass]="collapsed ? 'bi-layout-sidebar-inset' : 'bi-layout-sidebar'">
      </i>
    </button>

    <div class="brand" (click)="goHome()" title="Back to Home">
      <img src="assets/images/QuickMed-Logo.png" alt="QuickMed Logo" />
      <div class="brand-text" *ngIf="!collapsed">
        <p class="brand-title">{{ title }}</p>
        <p class="brand-subtitle">Receptionist</p>
      </div>
    </div>
  </div>

  <nav class="sidebar-nav">
    <ng-container *ngFor="let item of menuItems">
      <a
        *ngIf="item.route; else actionItem"
        [routerLink]="item.route"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: item.exact ?? false }"
        class="nav-link"
        [attr.aria-label]="item.label"
        [attr.title]="collapsed ? item.label : null"
        (click)="handleItemClick(item, $event)"
      >
        <i class="bi" [ngClass]="item.icon"></i>
        <span class="nav-text">{{ item.label }}</span>
      </a>
      <ng-template #actionItem>
        <button
          class="nav-link action"
          type="button"
          [attr.aria-label]="item.label"
          [attr.title]="collapsed ? item.label : null"
          (click)="handleItemClick(item)"
        >
          <i class="bi" [ngClass]="item.icon"></i>
          <span class="nav-text">{{ item.label }}</span>
        </button>
      </ng-template>
    </ng-container>
  </nav>

  <div class="sidebar-divider" *ngIf="secondaryItems.length"></div>

  <nav class="sidebar-nav secondary" *ngIf="secondaryItems.length">
    <ng-container *ngFor="let item of secondaryItems">
      <a
        *ngIf="item.route; else secondaryAction"
        [routerLink]="item.route"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: item.exact ?? false }"
        class="nav-link"
        [attr.aria-label]="item.label"
        [attr.title]="collapsed ? item.label : null"
        (click)="handleItemClick(item, $event)"
      >
        <i class="bi" [ngClass]="item.icon"></i>
        <span class="nav-text">{{ item.label }}</span>
      </a>
      <ng-template #secondaryAction>
        <button
          class="nav-link action"
          type="button"
          [attr.aria-label]="item.label"
          [attr.title]="collapsed ? item.label : null"
          (click)="handleItemClick(item)"
        >
          <i class="bi" [ngClass]="item.icon"></i>
          <span class="nav-text">{{ item.label }}</span>
        </button>
      </ng-template>
    </ng-container>
  </nav>

  <button class="theme-toggle-btn" (click)="toggleTheme()">
    <i *ngIf="darkTheme" class="bi bi-moon-fill"></i>
    <i *ngIf="!darkTheme" class="bi bi-sun-fill"></i>
  </button>
</aside>
