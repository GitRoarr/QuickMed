<app-admin-shell searchPlaceholder="Search receptionists...">
  <div class="receptionist-page">
    <header class="page-head">
      <div>
        <p class="eyebrow">Front Desk Squad</p>
        <h1>Receptionist Management</h1>
        <p class="subtitle">Hire, onboard, and empower receptionists who keep the clinic running smoothly.</p>
      </div>
      <button class="primary-btn" (click)="inviteForm.reset()">
        <i class="bi bi-person-plus-fill"></i> Invite Receptionist
      </button>
    </header>

    <div class="dual-grid">
      <section class="invite-card">
        <h3><i class="bi bi-lightning-charge-fill"></i> Quick Invite</h3>
        <form [formGroup]="inviteForm" (ngSubmit)="inviteReceptionist()">
          <div class="form-row">
            <div class="form-group">
              <input type="text" formControlName="firstName" placeholder="First Name">
            </div>
            <div class="form-group">
              <input type="text" formControlName="lastName" placeholder="Last Name">
            </div>
          </div>
          <div class="form-group">
            <input type="email" formControlName="email" placeholder="Email Address">
          </div>
          <div class="form-group">
            <input type="tel" formControlName="phoneNumber" placeholder="Phone (optional)">
          </div>
          <button type="submit" class="submit-btn" [disabled]="loading() || inviteForm.invalid">
            {{ loading() ? 'Creating Account...' : 'Send Invite' }}
          </button>
        </form>

        <div class="invite-link" *ngIf="inviteLink()">
          <div class="invite-link__header">
            <div>
              <h4>Share invitation link</h4>
              <p>Send this link to {{ inviteEmail() || 'the receptionist' }} to set a password.</p>
            </div>
            <button type="button" class="copy-btn" (click)="copyInviteLink()">
              <i class="bi bi-clipboard"></i> Copy
            </button>
          </div>
          <div class="invite-link__value">{{ inviteLink() }}</div>
        </div>

        <div class="invite-link" *ngIf="invitePreviewUrl()">
          <div class="invite-link__header">
            <div>
              <h4>Email preview link</h4>
              <p>Open the sent invite email preview.</p>
            </div>
            <a class="copy-btn" [href]="invitePreviewUrl()" target="_blank" rel="noopener">
              <i class="bi bi-box-arrow-up-right"></i> Open
            </a>
          </div>
          <div class="invite-link__value">{{ invitePreviewUrl() }}</div>
        </div>
      </section>

      <!-- Filter Panel -->
      <section class="filter-card">
        <h3><i class="bi bi-funnel-fill"></i> Advanced Filters</h3>
        <form [formGroup]="filterForm">
          <div class="form-group">
            <input type="text" formControlName="search" placeholder="Search by name, email or ID...">
          </div>
          <div class="form-group mt-3">
            <select formControlName="status">
              <option value="all">View All Statuses</option>
              <option value="active">Active Members</option>
              <option value="inactive">Inactive Members</option>
            </select>
          </div>
        </form>
      </section>
    </div>

    <!-- Grid for Receptionists -->
    <div class="receptionist-grid">
      <div *ngFor="let user of receptionists()" class="receptionist-card">
        <span class="status-badge" [class.active]="user.isActive" [class.inactive]="!user.isActive">
          {{ user.isActive ? 'Active Member' : 'Inactive' }}
        </span>

        <div class="card-head">
          <div class="avatar-wrapper">
            <div class="avatar">{{ getInitials(user) }}</div>
          </div>
          <div class="info">
            <h3>{{ user.firstName }} {{ user.lastName }}</h3>
            <p>{{ user.email }}</p>
          </div>
        </div>

        <div class="card-actions">
          <button *ngIf="!user.isActive" class="action-btn activate" [disabled]="togglingId() === user.id"
            (click)="toggleActive(user)">
            <i class="bi" [class.bi-check-circle-fill]="togglingId() !== user.id"
              [class.bi-arrow-repeat]="togglingId() === user.id" [class.spin]="togglingId() === user.id"></i>
            {{ togglingId() === user.id ? 'Activating...' : 'Activate' }}
          </button>
          <button *ngIf="user.isActive" class="action-btn deactivate" [disabled]="togglingId() === user.id"
            (click)="toggleActive(user)">
            <i class="bi" [class.bi-pause-circle-fill]="togglingId() !== user.id"
              [class.bi-arrow-repeat]="togglingId() === user.id" [class.spin]="togglingId() === user.id"></i>
            {{ togglingId() === user.id ? 'Deactivating...' : 'Deactivate' }}
          </button>
          <button class="action-btn remove" [disabled]="togglingId() === user.id" (click)="removeReceptionist(user.id)">
            <i class="bi bi-trash3-fill"></i> Remove
          </button>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="receptionists().length === 0 && !loading()" class="empty-state">
        <i class="bi bi-people"></i>
        <p>No receptionists found matching your criteria.</p>
      </div>

      <!-- Loader -->
      <div *ngIf="loading()" class="loader">
        <i class="bi bi-arrow-repeat spin"></i>
        <p>Updating receptionist list...</p>
      </div>
    </div>
  </div>
</app-admin-shell>