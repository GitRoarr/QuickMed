<div class="modal-backdrop" (click)="onClose()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <header class="modal-header">
            <h3>Message {{ patientName }}</h3>
            <button class="close-btn" (click)="onClose()"><i class="bi bi-x-lg"></i></button>
        </header>

        <div class="modal-body">
            <div class="form-group">
                <label>Subject</label>
                <input type="text" [(ngModel)]="subject" placeholder="e.g. Appointment Reminder" class="form-control"
                    [disabled]="isSending">
            </div>

            <div class="form-group">
                <label>Message</label>
                <textarea [(ngModel)]="messageBody" rows="5" placeholder="Type your message here..."
                    class="form-control" [disabled]="isSending"></textarea>
            </div>
        </div>

        <footer class="modal-footer">
            <button class="secondary-btn" (click)="onClose()" [disabled]="isSending">Cancel</button>
            <button class="primary-btn" (click)="onSend()" [disabled]="!subject || !messageBody || isSending">
                <span *ngIf="!isSending"><i class="bi bi-send-fill"></i> Send Message</span>
                <span *ngIf="isSending">Sending...</span>
            </button>
        </footer>
    </div>
</div>